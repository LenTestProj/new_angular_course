{"ast":null,"code":"import { inject } from '@angular/core';\nimport { AuthService } from './auth.service';\nimport * as i0 from \"@angular/core\";\nexport class AuthDirective {\n  constructor() {\n    this.authService = inject(AuthService);\n  }\n  ngOnInit() {\n    this.updateVisibility();\n    this.subscription = this.authService.permissionChanges.subscribe(() => {\n      this.updateVisibility();\n    });\n    // Subscribe to permission changes\n  }\n\n  ngOnChanges(changes) {\n    console.log(\"ng onchanges\");\n    if (changes[\"userType\"]) {\n      this.updateVisibility();\n    }\n  }\n  updateVisibility() {\n    if (this.authService.activePermission === this.userType) {\n      console.log(\"SHOW ELEMENT\");\n    } else {\n      console.log(\"DO NOT SHOW ELEMENT\");\n    }\n  }\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n  static #_ = this.ɵfac = function AuthDirective_Factory(t) {\n    return new (t || AuthDirective)();\n  };\n  static #_2 = this.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n    type: AuthDirective,\n    selectors: [[\"\", \"appAuth\", \"\"]],\n    inputs: {\n      userType: [\"appAuth\", \"userType\"]\n    },\n    standalone: true,\n    features: [i0.ɵɵNgOnChangesFeature]\n  });\n}","map":{"version":3,"names":["inject","AuthService","AuthDirective","constructor","authService","ngOnInit","updateVisibility","subscription","permissionChanges","subscribe","ngOnChanges","changes","console","log","activePermission","userType","ngOnDestroy","unsubscribe","_","_2","selectors","inputs","standalone","features","i0","ɵɵNgOnChangesFeature"],"sources":["/home/lennon/Angular/New Tutorials/Section7:Enhancing_elements_deepDive/starting-project/src/app/auth/auth.directive.ts"],"sourcesContent":["import { Directive, Input, OnChanges, OnDestroy, OnInit, SimpleChanges, inject } from '@angular/core';\nimport { Permission } from './auth.model';\nimport { AuthService } from './auth.service';\nimport { Subscription } from 'rxjs';\n\n@Directive({\n  selector: '[appAuth]',\n  standalone:true\n})\nexport class AuthDirective implements OnInit,OnChanges,OnDestroy{\n    @Input({required:true,alias:\"appAuth\"}) userType!:Permission;\n    private authService = inject(AuthService);\n    private subscription!:Subscription;\n\n    constructor() { \n        \n    }\n\n    ngOnInit(): void {\n           this.updateVisibility();\n           this.subscription = this.authService.permissionChanges.subscribe(()=>{\n            this.updateVisibility();\n           })\n           // Subscribe to permission changes\n        \n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        console.log(\"ng onchanges\")\n        if(changes[\"userType\"]){\n            this.updateVisibility()\n        }\n    }\n\n    private updateVisibility():void{\n        if(this.authService.activePermission === this.userType){\n            console.log(\"SHOW ELEMENT\")\n        }\n        else{\n            console.log(\"DO NOT SHOW ELEMENT\");\n        }\n    }\n\n    ngOnDestroy(){\n        if(this.subscription){\n            this.subscription.unsubscribe();\n        }        \n    }\n}\n"],"mappings":"AAAA,SAAwEA,MAAM,QAAQ,eAAe;AAErG,SAASC,WAAW,QAAQ,gBAAgB;;AAO5C,OAAM,MAAOC,aAAa;EAKtBC,YAAA;IAHQ,KAAAC,WAAW,GAAGJ,MAAM,CAACC,WAAW,CAAC;EAKzC;EAEAI,QAAQA,CAAA;IACD,IAAI,CAACC,gBAAgB,EAAE;IACvB,IAAI,CAACC,YAAY,GAAG,IAAI,CAACH,WAAW,CAACI,iBAAiB,CAACC,SAAS,CAAC,MAAI;MACpE,IAAI,CAACH,gBAAgB,EAAE;IACxB,CAAC,CAAC;IACF;EAEP;;EAEAI,WAAWA,CAACC,OAAsB;IAC9BC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;IAC3B,IAAGF,OAAO,CAAC,UAAU,CAAC,EAAC;MACnB,IAAI,CAACL,gBAAgB,EAAE;;EAE/B;EAEQA,gBAAgBA,CAAA;IACpB,IAAG,IAAI,CAACF,WAAW,CAACU,gBAAgB,KAAK,IAAI,CAACC,QAAQ,EAAC;MACnDH,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;KAC9B,MACG;MACAD,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;;EAE1C;EAEAG,WAAWA,CAAA;IACP,IAAG,IAAI,CAACT,YAAY,EAAC;MACjB,IAAI,CAACA,YAAY,CAACU,WAAW,EAAE;;EAEvC;EAAC,QAAAC,CAAA,G;qBAtCQhB,aAAa;EAAA;EAAA,QAAAiB,EAAA,G;UAAbjB,aAAa;IAAAkB,SAAA;IAAAC,MAAA;MAAAN,QAAA;IAAA;IAAAO,UAAA;IAAAC,QAAA,GAAAC,EAAA,CAAAC,oBAAA;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}