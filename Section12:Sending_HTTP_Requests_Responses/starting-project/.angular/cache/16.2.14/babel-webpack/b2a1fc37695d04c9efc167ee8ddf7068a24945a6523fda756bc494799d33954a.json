{"ast":null,"code":"import { DestroyRef, inject, signal } from '@angular/core';\nimport { PlacesContainerComponent } from '../places-container/places-container.component';\nimport { PlacesComponent } from '../places.component';\nimport { HttpClient } from '@angular/common/http';\nimport { CommonModule } from '@angular/common';\nimport { PlacesService } from '../places.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction UserPlacesComponent_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 3);\n    i0.ɵɵtext(1, \" Fetching favourite Places... \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserPlacesComponent_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.error(), \" \");\n  }\n}\nfunction UserPlacesComponent_app_places_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-places\", 4);\n    i0.ɵɵlistener(\"selectPlace\", function UserPlacesComponent_app_places_3_Template_app_places_selectPlace_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onRemovePlace($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"places\", ctx_r2.places());\n  }\n}\nfunction UserPlacesComponent_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 3);\n    i0.ɵɵtext(1, \"Unfortunately, no favourite places could be found for the existing user.\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class UserPlacesComponent {\n  constructor() {\n    this.isFetching = signal(false);\n    this.error = signal('');\n    this.httpClient = inject(HttpClient);\n    this.placesService = inject(PlacesService);\n    this.destroyRef = inject(DestroyRef);\n    this.places = this.placesService.loadedUserPlaces;\n  }\n  ngOnInit() {\n    this.isFetching.set(true);\n    const subscription = this.placesService.loadUserPlaces().subscribe({\n      complete: () => {\n        this.isFetching.set(false);\n      },\n      error: error => {\n        console.log(\"error occured while fetching places are: \", error);\n        this.error.set(error.message);\n      }\n    });\n    this.destroyRef.onDestroy(() => {\n      subscription.unsubscribe();\n    });\n  }\n  onRemovePlace(place) {\n    const subscription = this.placesService.removeUserPlace(place).subscribe();\n    this.destroyRef.onDestroy(() => {\n      subscription.unsubscribe();\n    });\n  }\n  static #_ = this.ɵfac = function UserPlacesComponent_Factory(t) {\n    return new (t || UserPlacesComponent)();\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserPlacesComponent,\n    selectors: [[\"app-user-places\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 5,\n    vars: 4,\n    consts: [[\"title\", \"Your Favorite Places\"], [\"class\", \"fallback-text\", 4, \"ngIf\"], [3, \"places\", \"selectPlace\", 4, \"ngIf\"], [1, \"fallback-text\"], [3, \"places\", \"selectPlace\"]],\n    template: function UserPlacesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-places-container\", 0);\n        i0.ɵɵtemplate(1, UserPlacesComponent_p_1_Template, 2, 0, \"p\", 1);\n        i0.ɵɵtemplate(2, UserPlacesComponent_p_2_Template, 2, 1, \"p\", 1);\n        i0.ɵɵtemplate(3, UserPlacesComponent_app_places_3_Template, 1, 1, \"app-places\", 2);\n        i0.ɵɵtemplate(4, UserPlacesComponent_p_4_Template, 2, 0, \"p\", 1);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        let tmp_3_0;\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isFetching() && !ctx.error());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.error());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.places());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.places()) == null ? null : tmp_3_0.length) === 0);\n      }\n    },\n    dependencies: [PlacesContainerComponent, PlacesComponent, CommonModule, i1.NgIf],\n    styles: [\".fallback-text[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGxhY2VzL3VzZXItcGxhY2VzL3VzZXItcGxhY2VzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7QUFDcEIiLCJzb3VyY2VzQ29udGVudCI6WyIuZmFsbGJhY2stdGV4dCB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["DestroyRef","inject","signal","PlacesContainerComponent","PlacesComponent","HttpClient","CommonModule","PlacesService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r1","error","ɵɵlistener","UserPlacesComponent_app_places_3_Template_app_places_selectPlace_0_listener","$event","ɵɵrestoreView","_r5","ctx_r4","ɵɵnextContext","ɵɵresetView","onRemovePlace","ɵɵproperty","ctx_r2","places","UserPlacesComponent","constructor","isFetching","httpClient","placesService","destroyRef","loadedUserPlaces","ngOnInit","set","subscription","loadUserPlaces","subscribe","complete","console","log","message","onDestroy","unsubscribe","place","removeUserPlace","_","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","UserPlacesComponent_Template","rf","ctx","ɵɵtemplate","UserPlacesComponent_p_1_Template","UserPlacesComponent_p_2_Template","UserPlacesComponent_app_places_3_Template","UserPlacesComponent_p_4_Template","tmp_3_0","length","i1","NgIf","styles"],"sources":["/home/lennon/Angular/New Tutorials/Section12:Sending_HTTP_Requests_Responses/starting-project/src/app/places/user-places/user-places.component.ts","/home/lennon/Angular/New Tutorials/Section12:Sending_HTTP_Requests_Responses/starting-project/src/app/places/user-places/user-places.component.html"],"sourcesContent":["import { Component, DestroyRef, OnInit, inject, signal } from '@angular/core';\n\nimport { PlacesContainerComponent } from '../places-container/places-container.component';\nimport { PlacesComponent } from '../places.component';\nimport { Place } from '../place.model';\nimport { HttpClient } from '@angular/common/http';\nimport { catchError, map, subscribeOn, throwError } from 'rxjs';\nimport { CommonModule } from '@angular/common';\nimport { PlacesService } from '../places.service';\n\n@Component({\n  selector: 'app-user-places',\n  standalone: true,\n  templateUrl: './user-places.component.html',\n  styleUrls: ['./user-places.component.css'],\n  imports: [PlacesContainerComponent, PlacesComponent,CommonModule],\n})\nexport class UserPlacesComponent implements OnInit{\n    isFetching=signal(false);\n    error=signal('');\n    private httpClient = inject(HttpClient);\n    private placesService = inject(PlacesService)\n    private destroyRef = inject(DestroyRef);\n    places = this.placesService.loadedUserPlaces;\n\n    ngOnInit(): void {\n        this.isFetching.set(true);\n        const subscription = this.placesService.loadUserPlaces().subscribe({complete:()=>{\n            this.isFetching.set(false);\n        },error:(error:Error)=>{\n            console.log(\"error occured while fetching places are: \",error);\n            this.error.set(error.message)\n        }});\n\n        this.destroyRef.onDestroy(()=>{\n            subscription.unsubscribe();\n        })\n    }\n\n    onRemovePlace(place:Place){\n        const subscription = this.placesService.removeUserPlace(place).subscribe();\n\n        this.destroyRef.onDestroy(()=>{\n            subscription.unsubscribe();\n        })\n    }\n\n}\n","<app-places-container title=\"Your Favorite Places\">\n    <p *ngIf=\"isFetching() && !error()\" class=\"fallback-text\">\n        Fetching favourite Places...\n    </p>\n    <p *ngIf=\"error()\" class=\"fallback-text\">\n        {{error()}}   \n    </p>\n    <app-places *ngIf=\"places()\"  [places]=\"places()!\" (selectPlace)=\"onRemovePlace($event)\" />\n    <p *ngIf=\"places()?.length===0\" class=\"fallback-text\">Unfortunately, no favourite places could be found for the existing user.</p>\n</app-places-container>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}