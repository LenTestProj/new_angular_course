{"ast":null,"code":"import { DestroyRef, inject, signal } from '@angular/core';\nimport { PlacesComponent } from '../places.component';\nimport { PlacesContainerComponent } from '../places-container/places-container.component';\nimport { CommonModule } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport { catchError, map, throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction AvailablePlacesComponent_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 3);\n    i0.ɵɵtext(1, \" Fetching available Places... \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AvailablePlacesComponent_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.error(), \" \");\n  }\n}\nfunction AvailablePlacesComponent_app_places_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-places\", 4);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"places\", ctx_r2.places());\n  }\n}\nfunction AvailablePlacesComponent_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 3);\n    i0.ɵɵtext(1, \"Unfortunately, no places could be found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class AvailablePlacesComponent {\n  constructor() {\n    this.places = signal(undefined);\n    this.isFetching = signal(false);\n    this.error = signal('');\n    this.httpClient = inject(HttpClient);\n    this.destroyRef = inject(DestroyRef);\n  }\n  ngOnInit() {\n    this.isFetching.set(true);\n    const subscription = this.httpClient.get('http://localhost:3000/places', {\n      observe: 'response'\n    }).pipe(map(resData => {\n      console.log(\"res data is: \", resData);\n      return resData.body?.places;\n    }), catchError(error => {\n      console.log(\"catche error is: \", error);\n      return throwError(() => {\n        return new Error('Something went wrong while fetching places. Please try again later');\n      });\n    })).subscribe({\n      next: response => {\n        this.places.set(response);\n      },\n      complete: () => {\n        this.isFetching.set(false);\n      },\n      error: error => {\n        console.log(\"error occured while fetching places are: \", error);\n        this.error.set(error.message);\n      }\n    });\n    this.destroyRef.onDestroy(() => {\n      subscription.unsubscribe();\n    });\n  }\n  static #_ = this.ɵfac = function AvailablePlacesComponent_Factory(t) {\n    return new (t || AvailablePlacesComponent)();\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AvailablePlacesComponent,\n    selectors: [[\"app-available-places\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 5,\n    vars: 4,\n    consts: [[\"title\", \"Available Places\"], [\"class\", \"fallback-text\", 4, \"ngIf\"], [3, \"places\", 4, \"ngIf\"], [1, \"fallback-text\"], [3, \"places\"]],\n    template: function AvailablePlacesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-places-container\", 0);\n        i0.ɵɵtemplate(1, AvailablePlacesComponent_p_1_Template, 2, 0, \"p\", 1);\n        i0.ɵɵtemplate(2, AvailablePlacesComponent_p_2_Template, 2, 1, \"p\", 1);\n        i0.ɵɵtemplate(3, AvailablePlacesComponent_app_places_3_Template, 1, 1, \"app-places\", 2);\n        i0.ɵɵtemplate(4, AvailablePlacesComponent_p_4_Template, 2, 0, \"p\", 1);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        let tmp_3_0;\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isFetching() && !ctx.error());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.error());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.places());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.places()) == null ? null : tmp_3_0.length) === 0);\n      }\n    },\n    dependencies: [PlacesComponent, PlacesContainerComponent, CommonModule, i1.NgIf],\n    styles: [\".fallback-text[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGxhY2VzL2F2YWlsYWJsZS1wbGFjZXMvYXZhaWxhYmxlLXBsYWNlcy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQWtCO0FBQ3BCIiwic291cmNlc0NvbnRlbnQiOlsiLmZhbGxiYWNrLXRleHQge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["DestroyRef","inject","signal","PlacesComponent","PlacesContainerComponent","CommonModule","HttpClient","catchError","map","throwError","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r1","error","ɵɵelement","ɵɵproperty","ctx_r2","places","AvailablePlacesComponent","constructor","undefined","isFetching","httpClient","destroyRef","ngOnInit","set","subscription","get","observe","pipe","resData","console","log","body","Error","subscribe","next","response","complete","message","onDestroy","unsubscribe","_","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","AvailablePlacesComponent_Template","rf","ctx","ɵɵtemplate","AvailablePlacesComponent_p_1_Template","AvailablePlacesComponent_p_2_Template","AvailablePlacesComponent_app_places_3_Template","AvailablePlacesComponent_p_4_Template","tmp_3_0","length","i1","NgIf","styles"],"sources":["/home/lennon/Angular/New Tutorials/Section12:Sending_HTTP_Requests_Responses/starting-project/src/app/places/available-places/available-places.component.ts","/home/lennon/Angular/New Tutorials/Section12:Sending_HTTP_Requests_Responses/starting-project/src/app/places/available-places/available-places.component.html"],"sourcesContent":["import { Component, DestroyRef, OnInit, inject, signal } from '@angular/core';\n\nimport { Place } from '../place.model';\nimport { PlacesComponent } from '../places.component';\nimport { PlacesContainerComponent } from '../places-container/places-container.component';\nimport { CommonModule } from '@angular/common';\nimport {HttpClient} from '@angular/common/http'\nimport { catchError, map, retry, throwError } from 'rxjs';\n\n@Component({\n  selector: 'app-available-places',\n  standalone: true,\n  templateUrl: './available-places.component.html',\n  styleUrls: ['./available-places.component.css'],\n  imports: [PlacesComponent, PlacesContainerComponent,CommonModule],\n})\nexport class AvailablePlacesComponent implements OnInit {\n    places = signal<Place[] | undefined>(undefined);\n    isFetching=signal(false);\n    error=signal('');\n    private httpClient = inject(HttpClient);\n    private destroyRef = inject(DestroyRef);\n\n    ngOnInit(): void {\n        this.isFetching.set(true);\n        const subscription = this.httpClient.get<{places:Place[]}>('http://localhost:3000/places',{\n            observe:'response'\n        }).pipe(\n            map((resData)=>{\n                console.log(\"res data is: \",resData);\n               return resData.body?.places;\n            }),\n            catchError((error)=>{\n                console.log(\"catche error is: \",error)\n                return throwError(()=>{\n                    return new Error('Something went wrong while fetching places. Please try again later')\n                })\n            })\n            ).subscribe({next:(response)=>{\n                this.places.set(response);\n        },complete:()=>{\n            this.isFetching.set(false);\n        },error:(error)=>{\n            console.log(\"error occured while fetching places are: \",error);\n            this.error.set(error.message)\n        }});\n\n        this.destroyRef.onDestroy(()=>{\n            subscription.unsubscribe();\n        })\n    }\n}\n","<app-places-container title=\"Available Places\">\n    <p *ngIf=\"isFetching() && !error()\" class=\"fallback-text\">\n        Fetching available Places...\n    </p>\n    <p *ngIf=\"error()\" class=\"fallback-text\">\n        {{error()}}   \n    </p>\n    <app-places *ngIf=\"places()\"  [places]=\"places()!\" />\n    <p *ngIf=\"places()?.length===0\" class=\"fallback-text\">Unfortunately, no places could be found.</p>\n   \n</app-places-container>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}