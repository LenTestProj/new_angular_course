{"ast":null,"code":"import { DestroyRef, inject, signal } from '@angular/core';\nimport { PlacesContainerComponent } from '../places-container/places-container.component';\nimport { HttpClient } from '@angular/common/http';\nimport { catchError, map, throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class UserPlacesComponent {\n  constructor() {\n    this.places = signal(undefined);\n    this.isFetching = signal(false);\n    this.error = signal('');\n    this.httpClient = inject(HttpClient);\n    this.destroyRef = inject(DestroyRef);\n  }\n  ngOnInit() {\n    this.isFetching.set(true);\n    const subscription = this.httpClient.get('http://localhost:3000/user-places', {\n      observe: 'response'\n    }).pipe(map(resData => {\n      console.log(\"res data is: \", resData);\n      return resData.body?.places;\n    }), catchError(error => {\n      console.log(\"catche error is: \", error);\n      return throwError(() => {\n        return new Error('Something went wrong while fetching your favourite places. Please try again later');\n      });\n    })).subscribe({\n      next: response => {\n        this.places.set(response);\n      },\n      complete: () => {\n        this.isFetching.set(false);\n      },\n      error: error => {\n        console.log(\"error occured while fetching places are: \", error);\n        this.error.set(error.message);\n      }\n    });\n    this.destroyRef.onDestroy(() => {\n      subscription.unsubscribe();\n    });\n  }\n  static #_ = this.ɵfac = function UserPlacesComponent_Factory(t) {\n    return new (t || UserPlacesComponent)();\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserPlacesComponent,\n    selectors: [[\"app-user-places\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 3,\n    vars: 0,\n    consts: [[\"title\", \"Your Favorite Places\"]],\n    template: function UserPlacesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-places-container\", 0)(1, \"p\");\n        i0.ɵɵtext(2, \"Todo...\");\n        i0.ɵɵelementEnd()();\n      }\n    },\n    dependencies: [PlacesContainerComponent],\n    styles: [\".fallback-text[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGxhY2VzL3VzZXItcGxhY2VzL3VzZXItcGxhY2VzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7QUFDcEIiLCJzb3VyY2VzQ29udGVudCI6WyIuZmFsbGJhY2stdGV4dCB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["DestroyRef","inject","signal","PlacesContainerComponent","HttpClient","catchError","map","throwError","UserPlacesComponent","constructor","places","undefined","isFetching","error","httpClient","destroyRef","ngOnInit","set","subscription","get","observe","pipe","resData","console","log","body","Error","subscribe","next","response","complete","message","onDestroy","unsubscribe","_","_2","selectors","standalone","features","i0","ɵɵStandaloneFeature","decls","vars","consts","template","UserPlacesComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","styles"],"sources":["/home/lennon/Angular/New Tutorials/Section12:Sending_HTTP_Requests_Responses/starting-project/src/app/places/user-places/user-places.component.ts","/home/lennon/Angular/New Tutorials/Section12:Sending_HTTP_Requests_Responses/starting-project/src/app/places/user-places/user-places.component.html"],"sourcesContent":["import { Component, DestroyRef, OnInit, inject, signal } from '@angular/core';\n\nimport { PlacesContainerComponent } from '../places-container/places-container.component';\nimport { PlacesComponent } from '../places.component';\nimport { Place } from '../place.model';\nimport { HttpClient } from '@angular/common/http';\nimport { catchError, map, throwError } from 'rxjs';\n\n@Component({\n  selector: 'app-user-places',\n  standalone: true,\n  templateUrl: './user-places.component.html',\n  styleUrls: ['./user-places.component.css'],\n  imports: [PlacesContainerComponent, PlacesComponent],\n})\nexport class UserPlacesComponent implements OnInit{\n    places = signal<Place[] | undefined>(undefined);\n    isFetching=signal(false);\n    error=signal('');\n    private httpClient = inject(HttpClient);\n    private destroyRef = inject(DestroyRef);\n\n    ngOnInit(): void {\n        this.isFetching.set(true);\n        const subscription = this.httpClient.get<{places:Place[]}>('http://localhost:3000/user-places',{\n            observe:'response'\n        }).pipe(\n            map((resData)=>{\n                console.log(\"res data is: \",resData);\n               return resData.body?.places;\n            }),\n            catchError((error)=>{\n                console.log(\"catche error is: \",error)\n                return throwError(()=>{\n                    return new Error('Something went wrong while fetching your favourite places. Please try again later')\n                })\n            })\n            ).subscribe({next:(response)=>{\n                this.places.set(response);\n        },complete:()=>{\n            this.isFetching.set(false);\n        },error:(error:Error)=>{\n            console.log(\"error occured while fetching places are: \",error);\n            this.error.set(error.message)\n        }});\n\n        this.destroyRef.onDestroy(()=>{\n            subscription.unsubscribe();\n        })\n    }\n\n}\n","<app-places-container title=\"Your Favorite Places\">\n  <p>Todo...</p>\n</app-places-container>\n"],"mappings":"AAAA,SAAoBA,UAAU,EAAUC,MAAM,EAAEC,MAAM,QAAQ,eAAe;AAE7E,SAASC,wBAAwB,QAAQ,gDAAgD;AAGzF,SAASC,UAAU,QAAQ,sBAAsB;AACjD,SAASC,UAAU,EAAEC,GAAG,EAAEC,UAAU,QAAQ,MAAM;;AASlD,OAAM,MAAOC,mBAAmB;EAPhCC,YAAA;IAQI,KAAAC,MAAM,GAAGR,MAAM,CAAsBS,SAAS,CAAC;IAC/C,KAAAC,UAAU,GAACV,MAAM,CAAC,KAAK,CAAC;IACxB,KAAAW,KAAK,GAACX,MAAM,CAAC,EAAE,CAAC;IACR,KAAAY,UAAU,GAAGb,MAAM,CAACG,UAAU,CAAC;IAC/B,KAAAW,UAAU,GAAGd,MAAM,CAACD,UAAU,CAAC;;EAEvCgB,QAAQA,CAAA;IACJ,IAAI,CAACJ,UAAU,CAACK,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMC,YAAY,GAAG,IAAI,CAACJ,UAAU,CAACK,GAAG,CAAmB,mCAAmC,EAAC;MAC3FC,OAAO,EAAC;KACX,CAAC,CAACC,IAAI,CACHf,GAAG,CAAEgB,OAAO,IAAG;MACXC,OAAO,CAACC,GAAG,CAAC,eAAe,EAACF,OAAO,CAAC;MACrC,OAAOA,OAAO,CAACG,IAAI,EAAEf,MAAM;IAC9B,CAAC,CAAC,EACFL,UAAU,CAAEQ,KAAK,IAAG;MAChBU,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAACX,KAAK,CAAC;MACtC,OAAON,UAAU,CAAC,MAAI;QAClB,OAAO,IAAImB,KAAK,CAAC,mFAAmF,CAAC;MACzG,CAAC,CAAC;IACN,CAAC,CAAC,CACD,CAACC,SAAS,CAAC;MAACC,IAAI,EAAEC,QAAQ,IAAG;QAC1B,IAAI,CAACnB,MAAM,CAACO,GAAG,CAACY,QAAQ,CAAC;MACjC,CAAC;MAACC,QAAQ,EAACA,CAAA,KAAI;QACX,IAAI,CAAClB,UAAU,CAACK,GAAG,CAAC,KAAK,CAAC;MAC9B,CAAC;MAACJ,KAAK,EAAEA,KAAW,IAAG;QACnBU,OAAO,CAACC,GAAG,CAAC,2CAA2C,EAACX,KAAK,CAAC;QAC9D,IAAI,CAACA,KAAK,CAACI,GAAG,CAACJ,KAAK,CAACkB,OAAO,CAAC;MACjC;IAAC,CAAC,CAAC;IAEH,IAAI,CAAChB,UAAU,CAACiB,SAAS,CAAC,MAAI;MAC1Bd,YAAY,CAACe,WAAW,EAAE;IAC9B,CAAC,CAAC;EACN;EAAC,QAAAC,CAAA,G;qBAlCQ1B,mBAAmB;EAAA;EAAA,QAAA2B,EAAA,G;UAAnB3B,mBAAmB;IAAA4B,SAAA;IAAAC,UAAA;IAAAC,QAAA,GAAAC,EAAA,CAAAC,mBAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,6BAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCfhCP,EAAA,CAAAS,cAAA,8BAAmD;QAC9CT,EAAA,CAAAU,MAAA,cAAO;QAAAV,EAAA,CAAAW,YAAA,EAAI;;;mBDYJ/C,wBAAwB;IAAAgD,MAAA;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}