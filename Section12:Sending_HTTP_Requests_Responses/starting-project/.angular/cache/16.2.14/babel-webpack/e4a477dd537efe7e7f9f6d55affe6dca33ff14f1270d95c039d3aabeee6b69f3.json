{"ast":null,"code":"import { ElementRef, inject } from \"@angular/core\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./log.directive\";\nexport class SafeLinkDirective {\n  constructor() {\n    this.queryParam = 'my app';\n    this.hostElementRef = inject(ElementRef);\n    console.log(\"Safe link directive is active\");\n  }\n  onConfirmLeavePage(event) {\n    const wantsToLeave = window.confirm(\"Do you want to leave the app?\");\n    if (wantsToLeave) {\n      // const address = (event.target as HTMLAnchorElement).href;\n      // (event.target as HTMLAnchorElement).href = address + '?from='+this.queryParam\n      const address = this.hostElementRef.nativeElement.href;\n      this.hostElementRef.nativeElement.href = address + '?from=' + this.queryParam;\n      return;\n    }\n    event.preventDefault();\n  }\n  static #_ = this.ɵfac = function SafeLinkDirective_Factory(t) {\n    return new (t || SafeLinkDirective)();\n  };\n  static #_2 = this.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n    type: SafeLinkDirective,\n    selectors: [[\"a\", \"appSafeLink\", \"\"]],\n    hostBindings: function SafeLinkDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"click\", function SafeLinkDirective_click_HostBindingHandler($event) {\n          return ctx.onConfirmLeavePage($event);\n        });\n      }\n    },\n    inputs: {\n      queryParam: \"queryParam\"\n    },\n    standalone: true,\n    features: [i0.ɵɵHostDirectivesFeature([i1.LogDirective])]\n  });\n}","map":{"version":3,"names":["ElementRef","inject","SafeLinkDirective","constructor","queryParam","hostElementRef","console","log","onConfirmLeavePage","event","wantsToLeave","window","confirm","address","nativeElement","href","preventDefault","_","_2","selectors","hostBindings","SafeLinkDirective_HostBindings","rf","ctx","$event"],"sources":["/home/lennon/Angular/New Tutorials/Section7:Enhancing_elements_deepDive/starting-project/src/app/safe-link.directive.ts"],"sourcesContent":["import { Directive, ElementRef, Input, inject } from \"@angular/core\";\nimport { LogDirective } from \"./log.directive\";\n\n@Directive({\n    selector:'a[appSafeLink]', //targets anchor tag with appSafeLink Selector\n    standalone:true,\n    host:{\n        '(click)':'onConfirmLeavePage($event)'\n    },\n    hostDirectives:[LogDirective]\n})\nexport class SafeLinkDirective {\n    @Input() queryParam:string='my app';\n    private hostElementRef = inject<ElementRef<HTMLAnchorElement>>(ElementRef);\n\n    constructor(){\n        console.log(\"Safe link directive is active\")\n    }\n\n    onConfirmLeavePage(event:MouseEvent){\n        const wantsToLeave = window.confirm(\"Do you want to leave the app?\");\n\n        if(wantsToLeave){\n            // const address = (event.target as HTMLAnchorElement).href;\n            // (event.target as HTMLAnchorElement).href = address + '?from='+this.queryParam\n\n            const address = this.hostElementRef.nativeElement.href;\n            this.hostElementRef.nativeElement.href = address + '?from='+this.queryParam\n\n            return;\n        }\n\n        event.preventDefault();\n    }\n}"],"mappings":"AAAA,SAAoBA,UAAU,EAASC,MAAM,QAAQ,eAAe;;;AAWpE,OAAM,MAAOC,iBAAiB;EAI1BC,YAAA;IAHS,KAAAC,UAAU,GAAQ,QAAQ;IAC3B,KAAAC,cAAc,GAAGJ,MAAM,CAAgCD,UAAU,CAAC;IAGtEM,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;EAChD;EAEAC,kBAAkBA,CAACC,KAAgB;IAC/B,MAAMC,YAAY,GAAGC,MAAM,CAACC,OAAO,CAAC,+BAA+B,CAAC;IAEpE,IAAGF,YAAY,EAAC;MACZ;MACA;MAEA,MAAMG,OAAO,GAAG,IAAI,CAACR,cAAc,CAACS,aAAa,CAACC,IAAI;MACtD,IAAI,CAACV,cAAc,CAACS,aAAa,CAACC,IAAI,GAAGF,OAAO,GAAG,QAAQ,GAAC,IAAI,CAACT,UAAU;MAE3E;;IAGJK,KAAK,CAACO,cAAc,EAAE;EAC1B;EAAC,QAAAC,CAAA,G;qBAtBQf,iBAAiB;EAAA;EAAA,QAAAgB,EAAA,G;UAAjBhB,iBAAiB;IAAAiB,SAAA;IAAAC,YAAA,WAAAC,+BAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;iBAAjBC,GAAA,CAAAf,kBAAA,CAAAgB,MAAA,CACP;QAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}